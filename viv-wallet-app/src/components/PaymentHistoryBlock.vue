<template>
    <section>
        <h2>Historique de paiements</h2>
        <div v-if="payments.length > 0" class="wrapper">
            <table>
                <colgroup>
                    <col style="width: 45%" />
                    <col style="width: 20%" />
                    <col style="width: 35%" />
                </colgroup>
                <thead>
                    <tr>
                        <th class="right">DATE DE PAIEMENT</th>
                        <th class="right">VIV</th>
                        <th class="right amount-header">MONTANT</th>
                    </tr>
                </thead>
                <tbody>
                    <tr v-for="payment in payments" :key="payment.id">
                        <td class="right">{{ payment.date.toDateString() }}</td>
                        <td class="right viv">{{ payment.viv }}</td>
                        <td class="right payment">
                            {{ formatWithCurrency(payment.amount) }}
                            <div class="icon-wrapper">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 90 112.5">
                                    <path
                                        d="M31.435 52.99l-7.848-11.252c-2.599-3.725-16.145 5.724-13.547 9.45l14.604 20.935c2.598 3.725 7.772 4.647 11.498 2.048a8.168 8.168 0 002.472-2.753l.007.004.033-.074c.188-.347.354-.703.49-1.071 3.005-6.467 18.919-39.14 41.145-55.925 0 0-27.988.707-48.854 38.637z"
                                    />
                                </svg>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <svg class="illustration" viewBox="0 0 450 535" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M58.234 391.7l-5.333-21.034a273.263 273.263 0 00-28.977-10.396l-.674 9.775-2.73-10.769C8.308 355.788 0 354.252 0 354.252s11.222 42.674 34.76 75.299l27.425 4.817-21.306 3.072a110.456 110.456 0 009.53 10.1c34.24 31.782 72.377 46.364 85.182 32.569 12.804-13.794-4.573-50.741-38.813-82.523-10.615-9.853-23.95-17.76-37.297-23.983L58.234 391.7z"
                    fill="#E6E6E6"
                />
                <path
                    d="M108.955 368.858l6.308-20.763a273.295 273.295 0 00-19.433-23.879l-5.63 8.02 3.23-10.63c-8.651-9.298-14.97-14.907-14.97-14.907s-12.45 42.331-9.165 82.426l20.987 18.3-19.827-8.383a110.487 110.487 0 002.938 13.572c12.883 44.906 37.992 77.102 56.084 71.911 18.091-5.19 22.314-45.801 9.431-90.706-3.994-13.921-11.322-27.582-19.531-39.809l-10.422 14.848z"
                    fill="#E6E6E6"
                />
                <path
                    d="M140.378 255.613s-6.915 83.148-8.4 100.966a126.712 126.712 0 01-7.424 32.664s-2.97 5.94-2.97 11.879v75.723s-5.939 0-4.454 5.939c1.485 5.939 2.97 16.332 2.97 16.332h22.271s-1.485-4.454 2.97-5.939c4.454-1.484 0-13.363 0-13.363l23.756-89.086 35.634-74.238s20.787 66.814 25.241 74.238c0 0 16.333 83.147 19.302 90.571 2.97 7.424 4.455 7.424 2.97 10.394-1.485 2.969-1.485 5.939 0 7.423 1.485 1.485 29.695 0 29.695 0l-7.423-105.418-13.363-126.206-68.3-20.786-52.475 8.907z"
                    fill="#2F2E41"
                />
                <path
                    d="M136.432 487.238s-7.424-26.726-19.302-5.939-11.878 28.211-11.878 28.211-19.302 28.21 7.424 25.241c26.726-2.97 20.787-16.333 20.787-16.333s10.393-5.939 10.393-10.393c0-4.454-7.424-20.787-7.424-20.787zM256.698 484.269s7.424-26.726 19.302-5.939c11.879 20.786 11.879 28.21 11.879 28.21s19.302 28.211-7.424 25.241c-26.726-2.969-20.787-16.332-20.787-16.332s-10.393-5.939-10.393-10.394c0-4.454 7.423-20.786 7.423-20.786z"
                    fill="#2F2E41"
                />
                <path
                    d="M186.914 55.17s2.97 19.302-5.939 23.757c-8.908 4.454 19.302 20.787 26.726 20.787 7.424 0 20.787-14.848 20.787-14.848s-7.424-22.272-5.939-26.726l-35.635-2.97z"
                    fill="#A0616A"
                />
                <path
                    d="M203.247 70.018c17.22 0 31.18-13.96 31.18-31.18s-13.96-31.18-31.18-31.18c-17.221 0-31.18 13.96-31.18 31.18s13.959 31.18 31.18 31.18z"
                    fill="#A0616A"
                />
                <path
                    d="M264.122 102.683l-37.118-22.489s-21.119 23.974-43.967-2.752l-39.181 10.393 5.939 100.965s-8.909 40.088-5.939 47.512c2.969 7.424-7.424 10.394-4.454 11.878 2.969 1.485 0 11.879 0 11.879s57.906 29.695 121.751 7.423l-5.939-19.302a15.587 15.587 0 00-2.97-14.847s5.939-8.909-1.485-16.333c0 0 2.97-13.363-4.454-19.302l-1.485-20.786 4.455-10.394 14.847-63.845z"
                    fill="#CFCCE0"
                />
                <path
                    d="M187.29 24.36s-3.718 8.045 11.152 4.827c0 0 5.576 3.218 5.576-1.609 0 0 7.434 8.045 9.293 3.218 1.858-4.827 5.576 1.609 5.576 1.609l3.717-8.045 3.717 4.827h13.011s3.717-32.179-40.89-28.96c-44.608 3.217-22.663 54.201-22.663 54.201s.359-9.152 4.076-4.325c3.717 4.827 7.435-25.743 7.435-25.743z"
                    fill="#2F2E41"
                />
                <path
                    d="M277.485 162.074l1.485 31.18s5.939 57.906-5.939 83.147v13.363s-2.97 34.15-17.817 32.665c-14.848-1.485 4.454-48.998 4.454-48.998l-2.97-65.329-2.969-37.12 23.756-8.908z"
                    fill="#A0616A"
                />
                <path
                    d="M247.79 104.168l14.811-2.406a72.313 72.313 0 0120.823 38.04c4.455 23.757 5.939 28.211 5.939 28.211l-35.634 8.909-19.302-37.12 13.363-35.634z"
                    fill="#CFCCE0"
                />
                <path d="M418.327 87.223h-234.31v116.395h234.31V87.223z" fill="#fff" />
                <path
                    d="M209.602 94.223c-6.02-3.62-13.278-3.344-16.037-3.067 1.05 2.565 4.203 9.109 10.223 12.731 6.034 3.629 13.283 3.344 16.038 3.07-1.05-2.565-4.203-9.111-10.224-12.734zM237.889 166.056h-37.624a8.447 8.447 0 00-5.991 2.476 8.47 8.47 0 00-2.483 5.989 8.461 8.461 0 005.232 7.823 8.467 8.467 0 003.242.642h37.624a8.467 8.467 0 003.242-16.289 8.447 8.447 0 00-3.242-.641z"
                    class="primary"
                />
                <path
                    d="M408.261 76.7H197.318a18.685 18.685 0 00-18.686 18.686V198.16a18.686 18.686 0 0018.686 18.686h210.943a18.682 18.682 0 0018.686-18.686V95.386A18.686 18.686 0 00408.261 76.7zM192.099 89.446c.416-.075 10.294-1.756 18.473 3.166 8.179 4.92 11.321 14.435 11.45 14.838l.331 1.026-1.061.188a28.173 28.173 0 01-4.578.336 27.258 27.258 0 01-13.896-3.502c-8.179-4.92-11.321-14.435-11.45-14.837l-.331-1.026 1.062-.189zm45.79 95.421h-37.624a10.349 10.349 0 01-10.346-10.346 10.347 10.347 0 0110.346-10.347h37.624a10.344 10.344 0 0110.346 10.347 10.347 10.347 0 01-10.346 10.346zm171.187-1.881a11.322 11.322 0 01-11.287 11.287h-28.218a11.323 11.323 0 01-11.287-11.287v-16.93a11.322 11.322 0 0111.287-11.287h28.218a11.322 11.322 0 0111.287 11.287v16.93z"
                    class="primary"
                />
                <path
                    d="M378.507 179.694h-12.228a3.295 3.295 0 00-3.292 3.292 3.293 3.293 0 003.292 3.292h12.228a3.295 3.295 0 003.292-3.292 3.295 3.295 0 00-3.292-3.292zm0 4.703h-12.228a1.417 1.417 0 01-1-.412 1.419 1.419 0 01-.414-.999 1.418 1.418 0 01.414-.999 1.412 1.412 0 011-.412h12.228a1.41 1.41 0 010 2.822zM401.081 179.694h-12.228a3.291 3.291 0 000 6.584h12.228a3.295 3.295 0 003.292-3.292 3.295 3.295 0 00-3.292-3.292zm0 4.703h-12.228a1.417 1.417 0 01-1-.412 1.41 1.41 0 011-2.41h12.228a1.408 1.408 0 011.407 1.411 1.408 1.408 0 01-1.407 1.411zM378.507 171.229h-12.228a3.295 3.295 0 00-3.292 3.292 3.295 3.295 0 003.292 3.292h12.228a3.295 3.295 0 003.292-3.292 3.293 3.293 0 00-3.292-3.292zm0 4.703h-12.228a1.41 1.41 0 010-2.822h12.228a1.41 1.41 0 01.54 2.714 1.41 1.41 0 01-.54.108zM401.081 171.229h-12.228a3.291 3.291 0 000 6.584h12.228a3.295 3.295 0 003.292-3.292 3.293 3.293 0 00-3.292-3.292zm0 4.703h-12.228a1.414 1.414 0 01-1.41-1.411 1.41 1.41 0 011.41-1.411h12.228a1.41 1.41 0 01.54 2.714 1.41 1.41 0 01-.54.108zM378.507 162.763h-12.228a3.292 3.292 0 000 6.585h12.228a3.292 3.292 0 000-6.585zm0 4.703h-12.228a1.399 1.399 0 01-1-.411 1.423 1.423 0 01-.414-.999 1.41 1.41 0 011.414-1.411h12.228a1.413 1.413 0 011.407 1.411 1.411 1.411 0 01-1.407 1.41zM401.081 162.763h-12.228c-.873 0-1.71.347-2.327.965a3.288 3.288 0 000 4.655 3.288 3.288 0 002.327.965h12.228a3.292 3.292 0 000-6.585zm0 4.703h-12.228a1.399 1.399 0 01-1-.411 1.41 1.41 0 010-1.998 1.399 1.399 0 011-.412h12.228a1.411 1.411 0 010 2.821z"
                    fill="#4C51BF"
                />
                <path
                    d="M121.584 144.257s-13.362 56.421 2.97 56.421 54.936-63.845 54.936-63.845 40.089-20.787 23.757-28.211c-16.333-7.424-37.12 11.878-37.12 11.878l-23.985 33.3-1.256-16.967-19.302 7.424z"
                    fill="#A0616A"
                />
                <path
                    d="M152.765 96.744l-8.909-8.909s-17.817 10.394-19.302 20.787c-1.485 10.394-8.909 43.059-8.909 43.059l27.469 2.227 8.908-13.363.743-43.8z"
                    fill="#CFCCE0"
                />
            </svg>
        </div>
        <p v-else class="none">Aucun Historique de paiements trouv√© !</p>
    </section>
</template>

<script lang="ts">
import { defineComponent, PropType } from "vue";
import { Payment } from "../models/payment";

export default defineComponent({
    name: "PaymentHistoryBlock",
    props: {
        payments: {
            default: () => [],
            type: Array as PropType<Payment[]>,
        },
    },
    setup() {
        return {
            formatWithCurrency(value: number) {
                const formatter = new Intl.NumberFormat("fr", {
                    style: "currency",
                    currency: "EUR",
                });

                return formatter.format(value);
            },
        };
    },
});
</script>

<style scoped lang="scss">
.payment {
    font-weight: 600;
    color: $gray-700;
}

.amount-header {
    padding-right: $m-6;
}

.viv {
    font-weight: 600;
    color: $gray-700;
}

table {
    width: 60%;
}

.wrapper {
    display: flex;
    align-items: flex-start;
}

.illustration {
    width: 40%;
    object-fit: cover;
    padding: 0 0 0 $m-6;
    .primary {
        fill: $primary-700;
    }
}

.icon-wrapper {
    display: inline-flex;
    align-self: center;
    margin-left: $m-2;
    svg {
        transform: scale(1.4);
        height: 1em;
        top: 0.225em;
        position: relative;
        path {
            fill: $green-800;
        }
    }
}
</style>
